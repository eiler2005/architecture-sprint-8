# –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - –ø—Ä–æ–≤–µ—Ä–∫–∞ api c keycloak

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å (–Ω–∞ IDEA for Mac)

–ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç

```shell
chmod +x scripts/testapp_running.sh
scripts/testapp_running.sh
```

# üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—á–∞—Å—Ç–∏ –Ω–∞ React** –∏ **–±—ç–∫–µ–Ω–¥-—á–∞—Å—Ç–∏ –Ω–∞ FastAPI** (Python).  
–î–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Keycloak**.

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —à–∞–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### üîπ 1. –ó–∞–ø—É—Å–∫ Keycloak
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Keycloak –∏ –µ–≥–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—â–µ–Ω—ã.  
–î–ª—è —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```sh
docker-compose up keycloak_db keycloak
```

---

### üîπ 2. –ó–∞–ø—É—Å–∫ –±—ç–∫–µ–Ω–¥–∞ (FastAPI)
FastAPI –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–±–æ—Ä–∫–∏, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º—ã–π Python.  
–û–¥–Ω–∞–∫–æ, –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å API —Å –ø–æ–º–æ—â—å—é **—Ç–µ—Å—Ç–æ–≤ –Ω–∞ Java** (`ApiClientTest`).

#### ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ Docker-–æ–±—Ä–∞–∑–∞ –¥–ª—è API:
```sh
docker build -t reports-api api/
```

#### ‚úÖ –ó–∞–ø—É—Å–∫ API:
```sh
docker-compose up api
```

---

### üîπ 3. –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (React)
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π:

```sh
docker-compose up frontend
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1Ô∏è‚É£ –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:3000
```

–ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ —Å–∏—Å—Ç–µ–º—É –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É **Keycloak** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

---

### 2Ô∏è‚É£ –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (Keycloak)
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `keycloak/realm-export.json`.

| –†–æ–ª—å                        | –õ–æ–≥–∏–Ω        | –ü–∞—Ä–æ–ª—å        |
|-----------------------------|-------------|--------------|
| üë§ –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å      | `user1`     | `password123` |
| üîß –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä            | `admin1`    | `admin123`    |
| ü¶æ –ü—Ä–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | `prothetic1` | `prothetic123` |

---

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–æ–ª–µ–π

#### üîπ –í—Ö–æ–¥ –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ **—Ä–∞–∑–Ω—ã–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏** (`user1`, `admin1`, `prothetic1`).
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **–∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —Ä–∞–∑–¥–µ–ª—ã**, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –µ–≥–æ —Ä–æ–ª–∏.

#### üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ API
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **`ApiClientTest`** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ API.
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏ –∏–º–µ—é—Ç **—Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞**.

#### üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–æ–ª—è–º.
- –ù–∞–ø—Ä–∏–º–µ—Ä, **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö** –∏ –∏–º–µ—Ç—å –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, —á–µ–º –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

---

## üîπ 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ API —Å –ø–æ–º–æ—â—å—é `ApiClientTest`

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Java-–∫–ª–∞—Å—Å** `ApiClientTest`.
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ API.
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ **–Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç `401 Unauthorized`**, –∞ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ ‚Äì `200 OK`.
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **–æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**.

–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:
```
Response: {"user_id": "12345", "report": "Sample report data for prosthetic user."}
```

---

## üõ† –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### üìå –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
```sh
docker-compose down && docker-compose up --build
```

### üìå –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ API:
```sh
docker logs -f reports-api
```

### üìå –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Keycloak:
```sh
docker logs -f keycloak
```

---

## üîó –°—Å—ã–ª–∫–∏ (—Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: [http://localhost:3000](http://localhost:3000)
- **Keycloak**: [http://localhost:8080](http://localhost:8080)
- **Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: [http://localhost:8000/docs](http://localhost:8000/docs)

üöÄ **–¢–µ–ø–µ—Ä—å –≤—ã –≥–æ—Ç–æ–≤—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!** üéâ

## üìå –°–∫—Ä–∏–Ω—à–æ—Ç—ã (—Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

## docker

![img.png](images/img.png)

## keycloak

![img_1.png](images/img_1.png)

![img_2.png](images/img_2.png)

## api

![img_3.png](images/img_3.png)

## app

![img_6.png](images/img_6.png)

![img_4.png](images/img_4.png)

![img_5.png](images/img_5.png)

–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è user1

![img_7.png](images/img_7.png)






